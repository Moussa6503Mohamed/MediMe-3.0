{
  "entities": {
    "Patient": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Patient",
      "type": "object",
      "description": "Represents a patient in the MediMe Healthcare Platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Patient entity."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the patient."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the patient."
        },
        "dateOfBirth": {
          "type": "string",
          "description": "The date of birth of the patient.",
          "format": "date"
        },
        "gender": {
          "type": "string",
          "description": "The gender of the patient."
        },
        "contactNumber": {
          "type": "string",
          "description": "The contact number of the patient."
        },
        "email": {
          "type": "string",
          "description": "The email address of the patient.",
          "format": "email"
        },
        "address": {
          "type": "string",
          "description": "The address of the patient."
        },
        "medicalHistory": {
          "type": "string",
          "description": "A summary of the patient's medical history."
        },
        "insuranceProvider": {
          "type": "string",
          "description": "The patient's insurance provider."
        },
        "insurancePolicyNumber": {
          "type": "string",
          "description": "The patient's insurance policy number."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "dateOfBirth",
        "gender",
        "contactNumber",
        "email"
      ]
    },
    "Doctor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Doctor",
      "type": "object",
      "description": "Represents a doctor in the MediMe Healthcare Platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Doctor entity."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the doctor."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the doctor."
        },
        "specialty": {
          "type": "string",
          "description": "The doctor's medical specialty."
        },
        "contactNumber": {
          "type": "string",
          "description": "The contact number of the doctor."
        },
        "email": {
          "type": "string",
          "description": "The email address of the doctor.",
          "format": "email"
        },
        "address": {
          "type": "string",
          "description": "The address of the doctor's practice."
        },
        "hospitalAffiliation": {
          "type": "string",
          "description": "The hospital the doctor is affiliated with."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "specialty",
        "contactNumber",
        "email"
      ]
    },
    "Appointment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Appointment",
      "type": "object",
      "description": "Represents a medical appointment in the MediMe Healthcare Platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Appointment entity."
        },
        "patientId": {
          "type": "string",
          "description": "Reference to Patient. (Relationship: Patient 1:N Appointment)"
        },
        "doctorId": {
          "type": "string",
          "description": "Reference to Doctor. (Relationship: Doctor 1:N Appointment)"
        },
        "appointmentDateTime": {
          "type": "string",
          "description": "The date and time of the appointment.",
          "format": "date-time"
        },
        "reasonForVisit": {
          "type": "string",
          "description": "The reason for the patient's visit."
        },
        "notes": {
          "type": "string",
          "description": "Additional notes or comments about the appointment."
        }
      },
      "required": [
        "id",
        "patientId",
        "doctorId",
        "appointmentDateTime",
        "reasonForVisit"
      ]
    },
    "Medication": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Medication",
      "type": "object",
      "description": "Represents a medication prescribed to a patient in the MediMe Healthcare Platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Medication entity."
        },
        "patientId": {
          "type": "string",
          "description": "Reference to Patient. (Relationship: Patient 1:N Medication)"
        },
        "name": {
          "type": "string",
          "description": "The name of the medication."
        },
        "dosage": {
          "type": "string",
          "description": "The dosage of the medication."
        },
        "frequency": {
          "type": "string",
          "description": "How often the medication should be taken."
        },
        "route": {
          "type": "string",
          "description": "The route of administration (e.g., oral, topical)."
        },
        "startDate": {
          "type": "string",
          "description": "The date the medication was started.",
          "format": "date"
        },
        "endDate": {
          "type": "string",
          "description": "The date the medication was stopped (if applicable).",
          "format": "date"
        },
        "notes": {
          "type": "string",
          "description": "Additional notes or instructions regarding the medication."
        }
      },
      "required": [
        "id",
        "patientId",
        "name",
        "dosage",
        "frequency",
        "route",
        "startDate"
      ]
    },
    "MedicalReport": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MedicalReport",
      "type": "object",
      "description": "Represents a medical report or lab result for a patient in the MediMe Healthcare Platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MedicalReport entity."
        },
        "patientId": {
          "type": "string",
          "description": "Reference to Patient. (Relationship: Patient 1:N MedicalReport)"
        },
        "reportType": {
          "type": "string",
          "description": "The type of medical report (e.g., lab result, radiology report)."
        },
        "reportDate": {
          "type": "string",
          "description": "The date the report was generated.",
          "format": "date"
        },
        "reportContent": {
          "type": "string",
          "description": "The content of the medical report (e.g., text, PDF)."
        },
        "notes": {
          "type": "string",
          "description": "Additional notes or comments about the report."
        }
      },
      "required": [
        "id",
        "patientId",
        "reportType",
        "reportDate",
        "reportContent"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/patients/{patientId}",
        "definition": {
          "entityName": "Patient",
          "schema": {
            "$ref": "#/backend/entities/Patient"
          },
          "description": "Stores patient information. Path-based ownership ensures only the specific patient or authorized personnel can access the data.",
          "params": [
            {
              "name": "patientId",
              "description": "The unique identifier for the patient."
            }
          ]
        }
      },
      {
        "path": "/doctors/{doctorId}",
        "definition": {
          "entityName": "Doctor",
          "schema": {
            "$ref": "#/backend/entities/Doctor"
          },
          "description": "Stores doctor information. Path-based ownership ensures only the specific doctor or authorized personnel can access the data.",
          "params": [
            {
              "name": "doctorId",
              "description": "The unique identifier for the doctor."
            }
          ]
        }
      },
      {
        "path": "/patients/{patientId}/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/backend/entities/Appointment"
          },
          "description": "Stores appointments associated with a patient. Path-based ownership ensures that only the patient and associated doctor/staff can access these appointments.",
          "params": [
            {
              "name": "patientId",
              "description": "The unique identifier for the patient."
            },
            {
              "name": "appointmentId",
              "description": "The unique identifier for the appointment."
            }
          ]
        }
      },
      {
        "path": "/patients/{patientId}/medications/{medicationId}",
        "definition": {
          "entityName": "Medication",
          "schema": {
            "$ref": "#/backend/entities/Medication"
          },
          "description": "Stores medication information for a specific patient.  Path-based ownership ensures that only the patient and associated doctor/staff can access these medications.",
          "params": [
            {
              "name": "patientId",
              "description": "The unique identifier for the patient."
            },
            {
              "name": "medicationId",
              "description": "The unique identifier for the medication."
            }
          ]
        }
      },
      {
        "path": "/patients/{patientId}/medicalReports/{medicalReportId}",
        "definition": {
          "entityName": "MedicalReport",
          "schema": {
            "$ref": "#/backend/entities/MedicalReport"
          },
          "description": "Stores medical reports for a specific patient. Path-based ownership ensures that only the patient and associated doctor/staff can access these reports.",
          "params": [
            {
              "name": "patientId",
              "description": "The unique identifier for the patient."
            },
            {
              "name": "medicalReportId",
              "description": "The unique identifier for the medical report."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to ensure security, scalability, and debuggability, following the principles of Authorization Independence, Clarity of Intent, DBAC, and QAPs. The design prioritizes path-based ownership for user-specific data and uses membership maps for collaborative data access, ensuring clear authorization and efficient data retrieval. The structure is segregated based on security needs and data types. All documents in a collection share the same security requirements to avoid complex rules. All data related to patients and doctors are stored under their respective user IDs to maintain data ownership and privacy. Authorization Independence is achieved through path-based ownership, avoiding the need for `get()` calls in security rules. This ensures atomic operations and easier debugging. The segregation of data based on security requirements (e.g., private data under `/users/{userId}`) supports secure `list` operations (QAPs). The use of explicit state modeling with dedicated status fields enhances data clarity and predictability."
  }
}